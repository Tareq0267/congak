<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Congak / Pocket Al-Khwarizmi</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <link rel="manifest" href="manifest.json">
</head>
<body>

  <header class="topbar">
    <div class="brand">
      <div class="brand-title">Congak</div>
      <div class="brand-sub">Mental Math Trainer</div>
    </div>

    <button id="open-dashboard" class="btn ghost">Dashboard</button>
  </header>

  <!-- MAIN PAGE: SESSION SETUP (was popup before) -->
  <section id="setup" class="setup-page">
    <div class="card">
      <div class="card-header">
        <h2>Session Setup</h2>
        <p class="muted">Pick a mode + operations, then start.</p>
      </div>

      <div class="form">
        <label class="label">Mode</label>
        <select id="mode" class="input">
          <option value="kumon">Kumon (20 questions)</option>
          <option value="endless">Endless</option>
          <option value="buzzer">Buzzer Beater (1:00)</option>
        </select>

        <label class="label">Difficulty</label>
        <select id="difficulty" class="input">
          <option value="easy">Easy</option>
          <option value="medium" selected>Medium</option>
          <option value="hard">Hard</option>
        </select>

        <label class="label">Operations</label>
        <div class="ops">
          <label class="chip"><input type="checkbox" value="+" checked /> <span>+</span></label>
          <label class="chip"><input type="checkbox" value="-" /> <span>−</span></label>
          <label class="chip"><input type="checkbox" value="*" /> <span>×</span></label>
          <label class="chip"><input type="checkbox" value="/" /> <span>÷</span></label>
        </div>

        <label class="label">Timer (seconds, 0 = none)</label>
        <input id="timer" class="input" type="number" min="0" value="0" />

        <button id="start" class="btn primary">Start Session</button>

        <div class="hint muted">
          Tip: Buzzer Beater is fixed at <strong>60 seconds</strong> (timer input ignored).
        </div>
      </div>

      <div class="card-footer">
        <h3>Badges</h3>
        <div id="badge-list" class="badge-grid"></div>
      </div>
    </div>
  </section>

  <!-- GAME -->
  <section id="game" class="hidden">
    <div class="game-top">
      <div id="mode-pill" class="pill">Mode: —</div>
      <div id="progress-pill" class="pill">Progress: —</div>
      <div id="timer-pill" class="pill">Time: —</div>
    </div>

    <div class="card big">
      <div id="question" class="question">—</div>
      <div id="answer" class="answer">0</div>
      <div id="feedback" class="feedback"></div>
    </div>

    <div id="numpad" class="numpad"></div>

    <button id="end" class="btn danger">End Session</button>
  </section>

  <!-- DASHBOARD POPUP MODAL (was main page before) -->
  <div id="dashboard-modal" class="modal hidden" aria-hidden="true">
    <div id="dashboard-backdrop" class="modal-backdrop"></div>

    <div class="modal-card dashboard-card">
      <div class="modal-head">
        <div>
          <h2>Dashboard</h2>
          <div id="summary" class="muted">Attempts: — • Accuracy: — • Avg time: — • Buzzer avg: —</div>
        </div>
        <button id="close-dashboard" class="btn icon" aria-label="Close dashboard">✕</button>
      </div>

      <div id="dashboard" class="dashboard-body">
        <div id="chart-accuracy" class="chart"></div>
        <div id="chart-attempts" class="chart"></div>
        <div id="chart-speed" class="chart"></div>
        <div id="chart-badges" class="chart"></div>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("./sw.js");
    }
  </script>

</body>
</html>
